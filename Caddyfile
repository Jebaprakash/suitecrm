{
    frankenphp
    # Disable admin to avoid port conflicts and log noise
    admin off
}

:{$PORT} {
    # Bind to 0.0.0.0 for compatibility with Railway
    bind 0.0.0.0
    
    root * /app/public
    encode zstd gzip

    # Main PHP handler
    php_server

    # Static file server
    file_server

    # Standard rewrites
    try_files {path} {path}/ /index.php?{query}
}
